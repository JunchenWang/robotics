robot = convert_robot_tree2(importrobot('E:\data\URDF\franka_panda_urdf\franka_panda\panda.urdf'));
Il=[7.0337e-01, -1.3900e-04, 6.7720e-03, 7.0661e-01, 1.9169e-02, 9.1170e-03;
    7.9620e-03, -3.9250e-03, 1.0254e-02, 2.8110e-02, 7.0400e-04, 2.5995e-02;
    3.7242e-02, -4.7610e-03, -1.1396e-02, 3.6155e-02, -1.2805e-02, 1.0830e-02;
    2.5853e-02, 7.7960e-03, -1.3320e-03, 1.9552e-02, 8.6410e-03, 2.8323e-02;
    3.5549e-02, -2.1170e-03, -4.0370e-03, 2.9474e-02, 2.2900e-04, 8.6270e-03;
    1.9640e-03, 1.0900e-04, -1.1580e-03, 4.3540e-03, 3.4100e-04, 5.4330e-03;
    1.2516e-02, -4.2800e-04, -1.1960e-03, 1.0027e-02, -7.4100e-04, 4.8150e-03];

m =[4.970684
    0.646926
    3.228604
    3.587895
    1.225946
    1.666555
    7.35522e-01]; 

CoM_l =[ 3.875e-03,2.081e-03,0;
      -3.141e-03,-2.872e-02,3.495e-03;
       2.7518e-02,3.9252e-02,-6.6502e-02;
      -5.317e-02,1.04419e-01,2.7454e-02;
      -1.1953e-02,4.1065e-02,-3.8437e-02;
       6.0149e-02,-1.4117e-02,-1.0517e-02;
       1.0517e-02,-4.252e-03,6.1597e-02];
    robot.com = CoM_l;
robot.mass = m;
I = zeros(3,3,7);

for i = 1 : 7
    I(:,:,i) = [Il(i, 1), Il(i, 2), Il(i, 3)
                Il(i, 2), Il(i, 4), Il(i, 5)
                Il(i, 3), Il(i, 5), Il(i, 6)];
    robot.inertia(:,:,i) = transform_inertia_matrix(I(:,:,i), m(i), [eye(3), robot.com(i,:)'; 0 0 0 1]);
end
saveRobot2Json(robot, 'panda_correct.json');

