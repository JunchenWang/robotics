% data = [-15.9244745	-78.4482931	-98.9415345	27.325	1.844	-1118.593
% 
% 42.7795571	-75.4558658	-156.2042945	29.43	4.448	-1109.355
% 
% -42.3791627	-74.6510348	-73.3346213	26.341	1.578	-1123.74
% 
% -0.7134492	-68.4024369	-113.2490015	31.165	1.806	-1111.657
% 
% 27.4909111	-87.632368	-142.4185021	25.723	2.331	-1120.102
% 
% 55.9045069	-82.4593867	-170.433382	26.716	3.559	-1115.113
% 
% -44.7908731	-77.9087308	-70.6532787	25.922	1.658	-1123.703
% 
% -4.0695161	-71.6936585	-110.2711482	29.845	1.846	-1113.896
% 
% 42.44826	-60.4090083	-152.0366969	37.926	7.411	-1098.454
% 
% 57.5794907	-79.8387551	-171.828395	27.249	4.142	-1112.837
% ];
% % data = simulatedRCM;
% % data = [0 0 0 0 0 0;data];
% data(:,1:3) = data(:,1:3) / 180 * pi;
fun = @(x) trocarAnalysis(x, data);
options = optimoptions(@fminunc,'SpecifyObjectiveGradient',true,'display', 'iter','MaxIterations', 5000,'MaxFunctionEvaluations', 10000,'OptimalityTolerance',1e-12); 
x0 = [11 22 -2090 0 0 0 0 0 -1];
[x, f] = fminunc(fun,x0,options);
f = sqrt(f / size(data,1));